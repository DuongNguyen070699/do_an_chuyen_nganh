import { HttpParams } from '@angular/common/http';
import { RequestQueryBuilder } from './crud-request';
var CrudBaseService = /** @class */ (function () {
    function CrudBaseService(options, http) {
        this.http = http;
        this.options = options;
    }
    CrudBaseService.prototype.getPagination = function (limit, page, builder) {
        if (!builder) {
            builder = RequestQueryBuilder.create();
        }
        else if (!(builder instanceof RequestQueryBuilder)) {
            builder = RequestQueryBuilder.create(builder);
        }
        builder.setLimit(limit);
        builder.setPage(page);
        return this.http.get(this.getBaseUrl(), {
            params: this.getParamsFromQuery(builder),
        });
    };
    CrudBaseService.prototype.getMany = function (builder) {
        return this.http.get(this.getBaseUrl(), {
            params: this.getParamsFromQuery(builder),
        });
    };
    CrudBaseService.prototype.getOne = function (value, builder) {
        var url = this.getOneUrl(value);
        return this.http.get(url, {
            params: this.getParamsFromQuery(builder),
        });
    };
    CrudBaseService.prototype.create = function (body) {
        return this.http.post(this.getBaseUrl(), JSON.stringify(body), {
            headers: {
                'Content-Type': 'application/json',
            },
        });
    };
    CrudBaseService.prototype.createMany = function (body) {
        return this.http.post(this.getBaseUrl() + '/bulk', JSON.stringify({ bulk: body }), {
            headers: {
                'Content-Type': 'application/json',
            },
        });
    };
    CrudBaseService.prototype.put = function (value, body) {
        var url = this.getOneUrl(value);
        return this.http.put(url, JSON.stringify(body), {
            headers: {
                'Content-Type': 'application/json',
            },
        });
    };
    CrudBaseService.prototype.patch = function (value, body) {
        var url = this.getOneUrl(value);
        return this.http.patch(url, JSON.stringify(body), {
            headers: {
                'Content-Type': 'application/json',
            },
        });
    };
    CrudBaseService.prototype.delete = function (value) {
        var url = this.getOneUrl(value);
        return this.http.delete(url);
    };
    CrudBaseService.prototype.getParamsFromQuery = function (builder) {
        if (!(builder instanceof RequestQueryBuilder)) {
            builder = RequestQueryBuilder.create(builder);
        }
        return new HttpParams({ fromString: this.getQuery(builder) });
    };
    /**
     * Get request link
     */
    CrudBaseService.prototype.getBaseUrl = function () {
        return this.options.apiUrl + "/" + this.options.entity;
    };
    CrudBaseService.prototype.getOneUrl = function (value) {
        return this.getBaseUrl() + "/" + value;
    };
    CrudBaseService.prototype.getQuery = function (builder) {
        if (builder) {
            return builder.query();
        }
        return '';
    };
    return CrudBaseService;
}());
export { CrudBaseService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3J1ZC1iYXNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZXN0LWNydWQtdHlwZW9ybS1jbGllbnQvIiwic291cmNlcyI6WyJsaWIvY3J1ZC1iYXNlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFjLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRTlELE9BQU8sRUFBcUIsbUJBQW1CLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQWV4RTtJQUVFLHlCQUFZLE9BQXdCLEVBQVksSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtRQUM5RCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUN6QixDQUFDO0lBRUQsdUNBQWEsR0FBYixVQUNFLEtBQWEsRUFDYixJQUFZLEVBQ1osT0FBaUQ7UUFFakQsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNaLE9BQU8sR0FBRyxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUN4QzthQUFNLElBQUksQ0FBQyxDQUFDLE9BQU8sWUFBWSxtQkFBbUIsQ0FBQyxFQUFFO1lBQ3BELE9BQU8sR0FBRyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDL0M7UUFDRCxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBd0IsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFO1lBQzdELE1BQU0sRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDO1NBQ3pDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxpQ0FBTyxHQUFQLFVBQVEsT0FBaUQ7UUFDdkQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBTSxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUU7WUFDM0MsTUFBTSxF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QUFpQixPQUE2QjtRQUM1QyxJQUFJLE9BQU8sRUFBRTtZQUNYLE9BQU8sT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3hCO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQUFDLEFBNUdELElBNEdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBDcmVhdGVRdWVyeVBhcmFtcywgUmVxdWVzdFF1ZXJ5QnVpbGRlciB9IGZyb20gJy4vY3J1ZC1yZXF1ZXN0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ3J1ZEJhc2VPcHRpb25zIHtcclxuICBlbnRpdHk6IHN0cmluZztcclxuICBhcGlVcmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZVBhZ2luYXRpb248VD4ge1xyXG4gIGRhdGE6IEFycmF5PFQ+O1xyXG4gIGNvdW50OiBudW1iZXI7XHJcbiAgdG90YWw6IG51bWJlcjtcclxuICBwYWdlOiBudW1iZXI7XHJcbiAgcGFnZUNvdW50OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDcnVkQmFzZVNlcnZpY2U8VD4ge1xyXG4gIHByb3RlY3RlZCBvcHRpb25zOiBDcnVkQmFzZU9wdGlvbnM7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogQ3J1ZEJhc2VPcHRpb25zLCBwcm90ZWN0ZWQgaHR0cDogSHR0cENsaWVudCkge1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIGdldFBhZ2luYXRpb24oXHJcbiAgICBsaW1pdDogbnVtYmVyLFxyXG4gICAgcGFnZTogbnVtYmVyLFxyXG4gICAgYnVpbGRlcj86IFJlcXVlc3RRdWVyeUJ1aWxkZXIgfCBDcmVhdGVRdWVyeVBhcmFtc1xyXG4gICk6IE9ic2VydmFibGU8UmVzcG9uc2VQYWdpbmF0aW9uPFQ+PiB7XHJcbiAgICBpZiAoIWJ1aWxkZXIpIHtcclxuICAgICAgYnVpbGRlciA9IFJlcXVlc3RRdWVyeUJ1aWxkZXIuY3JlYXRlKCk7XHJcbiAgICB9IGVsc2UgaWYgKCEoYnVpbGRlciBpbnN0YW5jZW9mIFJlcXVlc3RRdWVyeUJ1aWxkZXIpKSB7XHJcbiAgICAgIGJ1aWxkZXIgPSBSZXF1ZXN0UXVlcnlCdWlsZGVyLmNyZWF0ZShidWlsZGVyKTtcclxuICAgIH1cclxuICAgIGJ1aWxkZXIuc2V0TGltaXQobGltaXQpO1xyXG4gICAgYnVpbGRlci5zZXRQYWdlKHBhZ2UpO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8UmVzcG9uc2VQYWdpbmF0aW9uPFQ+Pih0aGlzLmdldEJhc2VVcmwoKSwge1xyXG4gICAgICBwYXJhbXM6IHRoaXMuZ2V0UGFyYW1zRnJvbVF1ZXJ5KGJ1aWxkZXIpLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRNYW55KGJ1aWxkZXI/OiBSZXF1ZXN0UXVlcnlCdWlsZGVyIHwgQ3JlYXRlUXVlcnlQYXJhbXMpOiBPYnNlcnZhYmxlPFRbXT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8VFtdPih0aGlzLmdldEJhc2VVcmwoKSwge1xyXG4gICAgICBwYXJhbXM6IHRoaXMuZ2V0UGFyYW1zRnJvbVF1ZXJ5KGJ1aWxkZXIpLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRPbmUoXHJcbiAgICB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nIHwgYm9vbGVhbixcclxuICAgIGJ1aWxkZXI/OiBSZXF1ZXN0UXVlcnlCdWlsZGVyIHwgQ3JlYXRlUXVlcnlQYXJhbXNcclxuICApOiBPYnNlcnZhYmxlPFQ+IHtcclxuICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0T25lVXJsKHZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PFQ+KHVybCwge1xyXG4gICAgICBwYXJhbXM6IHRoaXMuZ2V0UGFyYW1zRnJvbVF1ZXJ5KGJ1aWxkZXIpLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoYm9keTogVCk6IE9ic2VydmFibGU8VD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0PFQ+KHRoaXMuZ2V0QmFzZVVybCgpLCBKU09OLnN0cmluZ2lmeShib2R5KSwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlTWFueShib2R5OiBUW10pOiBPYnNlcnZhYmxlPFRbXT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0PFRbXT4oXHJcbiAgICAgIHRoaXMuZ2V0QmFzZVVybCgpICsgJy9idWxrJyxcclxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBidWxrOiBib2R5IH0pLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHV0KHZhbHVlOiBudW1iZXIgfCBzdHJpbmcgfCBib29sZWFuLCBib2R5OiBUKTogT2JzZXJ2YWJsZTxUPiB7XHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLmdldE9uZVVybCh2YWx1ZSk7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnB1dDxUPih1cmwsIEpTT04uc3RyaW5naWZ5KGJvZHkpLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwYXRjaCh2YWx1ZTogbnVtYmVyIHwgc3RyaW5nIHwgYm9vbGVhbiwgYm9keTogVCk6IE9ic2VydmFibGU8VD4ge1xyXG4gICAgY29uc3QgdXJsID0gdGhpcy5nZXRPbmVVcmwodmFsdWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wYXRjaDxUPih1cmwsIEpTT04uc3RyaW5naWZ5KGJvZHkpLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGUodmFsdWU6IG51bWJlciB8IHN0cmluZyB8IGJvb2xlYW4pOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0T25lVXJsKHZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlPHZvaWQ+KHVybCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0UGFyYW1zRnJvbVF1ZXJ5KFxyXG4gICAgYnVpbGRlcjogUmVxdWVzdFF1ZXJ5QnVpbGRlciB8IENyZWF0ZVF1ZXJ5UGFyYW1zXHJcbiAgKSB7XHJcbiAgICBpZiAoIShidWlsZGVyIGluc3RhbmNlb2YgUmVxdWVzdFF1ZXJ5QnVpbGRlcikpIHtcclxuICAgICAgYnVpbGRlciA9IFJlcXVlc3RRdWVyeUJ1aWxkZXIuY3JlYXRlKGJ1aWxkZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBIdHRwUGFyYW1zKHsgZnJvbVN0cmluZzogdGhpcy5nZXRRdWVyeShidWlsZGVyKSB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCByZXF1ZXN0IGxpbmtcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZ2V0QmFzZVVybCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGAke3RoaXMub3B0aW9ucy5hcGlVcmx9LyR7dGhpcy5vcHRpb25zLmVudGl0eX1gO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldE9uZVVybCh2YWx1ZTogbnVtYmVyIHwgc3RyaW5nIHwgYm9vbGVhbikge1xyXG4gICAgcmV0dXJuIGAke3RoaXMuZ2V0QmFzZVVybCgpfS8ke3ZhbHVlfWA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFF1ZXJ5KGJ1aWxkZXI/OiBSZXF1ZXN0UXVlcnlCdWlsZGVyKSB7XHJcbiAgICBpZiAoYnVpbGRlcikge1xyXG4gICAgICByZXR1cm4gYnVpbGRlci5xdWVyeSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxufVxyXG4iXX0=