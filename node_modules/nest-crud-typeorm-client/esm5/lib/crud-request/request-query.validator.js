import { isUndefined, isArrayStrings, isStringFull, isObject, isEqual, isNumber, isNil, objKeys, } from '../util';
import { RequestQueryException } from './exceptions';
import { CondOperator, } from './types';
export var deprecatedComparisonOperatorsList = [
    'eq',
    'ne',
    'gt',
    'lt',
    'gte',
    'lte',
    'starts',
    'ends',
    'cont',
    'excl',
    'in',
    'notin',
    'isnull',
    'notnull',
    'between',
];
var ɵ0 = function (n) { return CondOperator[n]; };
export var comparisonOperatorsList = Object.assign(deprecatedComparisonOperatorsList, objKeys(CondOperator).map(ɵ0));
export var sortOrdersList = ['ASC', 'DESC'];
var comparisonOperatorsListStr = comparisonOperatorsList.join();
var sortOrdersListStr = sortOrdersList.join();
export function validateFields(fields) {
    if (!isArrayStrings(fields)) {
        throw new RequestQueryException('Invalid fields. Array of strings expected');
    }
}
export function validateCondition(val, cond) {
    if (!isObject(val) || !isStringFull(val.field)) {
        throw new RequestQueryException("Invalid field type in " + cond + " condition. String expected");
    }
    validateComparisonOperator(val.operator);
}
export function validateComparisonOperator(operator) {
    if (!comparisonOperatorsList.includes(operator)) {
        throw new RequestQueryException("Invalid comparison operator. " + comparisonOperatorsListStr + " expected");
    }
}
export function validateJoin(join) {
    if (!isObject(join) || !isStringFull(join.field)) {
        throw new RequestQueryException('Invalid join field. String expected');
    }
    if (!isUndefined(join.select) && !isArrayStrings(join.select)) {
        throw new RequestQueryException('Invalid join select. Array of strings expected');
    }
}
export function validateSort(sort) {
    if (!isObject(sort) || !isStringFull(sort.field)) {
        throw new RequestQueryException('Invalid sort field. String expected');
    }
    if (!isEqual(sort.order, sortOrdersList[0]) &&
        !isEqual(sort.order, sortOrdersList[1])) {
        throw new RequestQueryException("Invalid sort order. " + sortOrdersListStr + " expected");
    }
}
export function validateNumeric(val, num) {
    if (!isNumber(val)) {
        throw new RequestQueryException("Invalid " + num + ". Number expected");
    }
}
export function validateParamOption(options, name) {
    if (!isObject(options)) {
        throw new RequestQueryException("Invalid param " + name + ". Invalid crud options");
    }
    var option = options[name];
    if (option && option.disabled) {
        return;
    }
    if (!isObject(option) || isNil(option.field) || isNil(option.type)) {
        throw new RequestQueryException("Invalid param option in Crud");
    }
}
export function validateUUID(str, name) {
    var uuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
    var uuidV4 = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
    if (!uuidV4.test(str) && !uuid.test(str)) {
        throw new RequestQueryException("Invalid param " + name + ". UUID string expected");
    }
}
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC1xdWVyeS52YWxpZGF0b3IuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZXN0LWNydWQtdHlwZW9ybS1jbGllbnQvIiwic291cmNlcyI6WyJsaWIvY3J1ZC1yZXF1ZXN0L3JlcXVlc3QtcXVlcnkudmFsaWRhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxXQUFXLEVBQ1gsY0FBYyxFQUNkLFlBQVksRUFDWixRQUFRLEVBQ1IsT0FBTyxFQUNQLFFBQVEsRUFDUixLQUFLLEVBQ0wsT0FBTyxHQUNSLE1BQU0sU0FBUyxDQUFDO0FBRWpCLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUVyRCxPQUFPLEVBTUwsWUFBWSxHQUNiLE1BQU0sU0FBUyxDQUFDO0FBRWpCLE1BQU0sQ0FBQyxJQUFNLGlDQUFpQyxHQUFHO0lBQy9DLElBQUk7SUFDSixJQUFJO0lBQ0osSUFBSTtJQUNKLElBQUk7SUFDSixLQUFLO0lBQ0wsS0FBSztJQUNMLFFBQVE7SUFDUixNQUFNO0lBQ04sTUFBTTtJQUNOLE1BQU07SUFDTixJQUFJO0lBQ0osT0FBTztJQUNQLFFBQVE7SUFDUixTQUFTO0lBQ1QsU0FBUztDQUNWLENBQUM7U0FHMEIsVUFBQyxDQUFDLElBQUssT0FBQSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQWYsQ0FBZTtBQUZsRCxNQUFNLENBQUMsSUFBTSx1QkFBdUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUNsRCxpQ0FBaUMsRUFDakMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsSUFBd0IsQ0FDbEQsQ0FBQztBQUVGLE1BQU0sQ0FBQyxJQUFNLGNBQWMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUU5QyxJQUFNLDBCQUEwQixHQUFHLHVCQUF1QixDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2xFLElBQU0saUJBQWlCLEdBQUcsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBRWhELE1B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RCxNQUFNLFVBQVUsWUFBWSxDQUFDLEdBQVcsRUFBRSxJQUFZO0lBQ3BELElBQU0sSUFBSSxHQUFHLGlFQUFpRSxDQUFDO0lBQy9FLElBQU0sTUFBTSxHQUFHLHNFQUFzRSxDQUFDO0lBQ3RGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUN4QyxNQUFNLElBQUkscUJBQXFCLENBQzdCLG1CQUFpQixJQUFJLDJCQUF3QixDQUM5QyxDQUFDO0tBQ0g7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaXNVbmRlZmluZWQsXG4gIGlzQXJyYXlTdHJpbmdzLFxuICBpc1N0cmluZ0Z1bGwsXG4gIGlzT2JqZWN0LFxuICBpc0VxdWFsLFxuICBpc051bWJlcixcbiAgaXNOaWwsXG4gIG9iaktleXMsXG59IGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQgeyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24gfSBmcm9tICcuL2V4Y2VwdGlvbnMnO1xuaW1wb3J0IHsgUGFyYW1zT3B0aW9ucywgUGFyYW1PcHRpb24gfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtcbiAgUXVlcnlGaWVsZHMsXG4gIFF1ZXJ5RmlsdGVyLFxuICBDb21wYXJpc29uT3BlcmF0b3IsXG4gIFF1ZXJ5Sm9pbixcbiAgUXVlcnlTb3J0LFxuICBDb25kT3BlcmF0b3IsXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgZGVwcmVjYXRlZENvbXBhcmlzb25PcGVyYXRvcnNMaXN0ID0gW1xuICAnZXEnLFxuICAnbmUnLFxuICAnZ3QnLFxuICAnbHQnLFxuICAnZ3RlJyxcbiAgJ2x0ZScsXG4gICdzdGFydHMnLFxuICAnZW5kcycsXG4gICdjb250JyxcbiAgJ2V4Y2wnLFxuICAnaW4nLFxuICAnbm90aW4nLFxuICAnaXNudWxsJyxcbiAgJ25vdG51bGwnLFxuICAnYmV0d2VlbicsXG5dO1xuZXhwb3J0IGNvbnN0IGNvbXBhcmlzb25PcGVyYXRvcnNMaXN0ID0gT2JqZWN0LmFzc2lnbihcbiAgZGVwcmVjYXRlZENvbXBhcmlzb25PcGVyYXRvcnNMaXN0LFxuICBvYmpLZXlzKENvbmRPcGVyYXRvcikubWFwKChuKSA9PiBDb25kT3BlcmF0b3Jbbl0pXG4pO1xuXG5leHBvcnQgY29uc3Qgc29ydE9yZGVyc0xpc3QgPSBbJ0FTQycsICdERVNDJ107XG5cbmNvbnN0IGNvbXBhcmlzb25PcGVyYXRvcnNMaXN0U3RyID0gY29tcGFyaXNvbk9wZXJhdG9yc0xpc3Quam9pbigpO1xuY29uc3Qgc29ydE9yZGVyc0xpc3RTdHIgPSBzb3J0T3JkZXJzTGlzdC5qb2luKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpZWxkcyhmaWVsZHM6IFF1ZXJ5RmllbGRzKTogdm9pZCB7XG4gIGlmICghaXNBcnJheVN0cmluZ3MoZmllbGRzKSkge1xuICAgIHRocm93IG5ldyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24oXG4gICAgICAnSW52YWxpZCBmaWVsZHMuIEFycmF5IG9mIHN0cmluZ3MgZXhwZWN0ZWQnXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb25kaXRpb24oXG4gIHZhbDogUXVlcnlGaWx0ZXIsXG4gIGNvbmQ6ICdmaWx0ZXInIHwgJ29yJyB8ICdzZWFyY2gnXG4pOiB2b2lkIHtcbiAgaWYgKCFpc09iamVjdCh2YWwpIHx8ICFpc1N0cmluZ0Z1bGwodmFsLmZpZWxkKSkge1xuICAgIHRocm93IG5ldyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24oXG4gICAgICBgSW52YWxpZCBmaWVsZCB0eXBlIGluICR7Y29uZH0gY29uZGl0aW9uLiBTdHJpbmcgZXhwZWN0ZWRgXG4gICAgKTtcbiAgfVxuICB2YWxpZGF0ZUNvbXBhcmlzb25PcGVyYXRvcih2YWwub3BlcmF0b3IpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb21wYXJpc29uT3BlcmF0b3Iob3BlcmF0b3I6IENvbXBhcmlzb25PcGVyYXRvcik6IHZvaWQge1xuICBpZiAoIWNvbXBhcmlzb25PcGVyYXRvcnNMaXN0LmluY2x1ZGVzKG9wZXJhdG9yKSkge1xuICAgIHRocm93IG5ldyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24oXG4gICAgICBgSW52YWxpZCBjb21wYXJpc29uIG9wZXJhdG9yLiAke2NvbXBhcmlzb25PcGVyYXRvcnNMaXN0U3RyfSBleHBlY3RlZGBcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUpvaW4oam9pbjogUXVlcnlKb2luKTogdm9pZCB7XG4gIGlmICghaXNPYmplY3Qoam9pbikgfHwgIWlzU3RyaW5nRnVsbChqb2luLmZpZWxkKSkge1xuICAgIHRocm93IG5ldyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24oJ0ludmFsaWQgam9pbiBmaWVsZC4gU3RyaW5nIGV4cGVjdGVkJyk7XG4gIH1cbiAgaWYgKCFpc1VuZGVmaW5lZChqb2luLnNlbGVjdCkgJiYgIWlzQXJyYXlTdHJpbmdzKGpvaW4uc2VsZWN0KSkge1xuICAgIHRocm93IG5ldyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24oXG4gICAgICAnSW52YWxpZCBqb2luIHNlbGVjdC4gQXJyYXkgb2Ygc3RyaW5ncyBleHBlY3RlZCdcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNvcnQoc29ydDogUXVlcnlTb3J0KTogdm9pZCB7XG4gIGlmICghaXNPYmplY3Qoc29ydCkgfHwgIWlzU3RyaW5nRnVsbChzb3J0LmZpZWxkKSkge1xuICAgIHRocm93IG5ldyBSZXF1ZXN0UXVlcnlFeGNlcHRpb24oJ0ludmFsaWQgc29ydCBmaWVsZC4gU3RyaW5nIGV4cGVjdGVkJyk7XG4gIH1cbiAgaWYgKFxuICAgICFpc0VxdWFsKHNvcnQub3JkZXIsIHNvcnRPcmRlcnNMaXN0WzBdKSAmJlxuICAgICFpc0VxdWFsKHNvcnQub3JkZXIsIHNvcnRPcmRlcnNMaXN0WzFdKVxuICApIHtcbiAgICB0aHJvdyBuZXcgUmVxdWVzdFF1ZXJ5RXhjZXB0aW9uKFxuICAgICAgYEludmFsaWQgc29ydCBvcmRlci4gJHtzb3J0T3JkZXJzTGlzdFN0cn0gZXhwZWN0ZWRgXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1lcmljKFxuICB2YWw6IG51bWJlcixcbiAgbnVtOiAnbGltaXQnIHwgJ29mZnNldCcgfCAncGFnZScgfCAnY2FjaGUnIHwgc3RyaW5nXG4pOiB2b2lkIHtcbiAgaWYgKCFpc051bWJlcih2YWwpKSB7XG4gICAgdGhyb3cgbmV3IFJlcXVlc3RRdWVyeUV4Y2VwdGlvbihgSW52YWxpZCAke251bX0uIE51bWJlciBleHBlY3RlZGApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhcmFtT3B0aW9uKG9wdGlvbnM6IFBhcmFtc09wdGlvbnMsIG5hbWU6IHN0cmluZykge1xuICBpZiAoIWlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgdGhyb3cgbmV3IFJlcXVlc3RRdWVyeUV4Y2VwdGlvbihcbiAgICAgIGBJbnZhbGlkIHBhcmFtICR7bmFtZX0uIEludmFsaWQgY3J1ZCBvcHRpb25zYFxuICAgICk7XG4gIH1cbiAgY29uc3Qgb3B0aW9uID0gb3B0aW9uc1tuYW1lXTtcbiAgaWYgKG9wdGlvbiAmJiBvcHRpb24uZGlzYWJsZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCFpc09iamVjdChvcHRpb24pIHx8IGlzTmlsKG9wdGlvbi5maWVsZCkgfHwgaXNOaWwob3B0aW9uLnR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IFJlcXVlc3RRdWVyeUV4Y2VwdGlvbihgSW52YWxpZCBwYXJhbSBvcHRpb24gaW4gQ3J1ZGApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVVVSUQoc3RyOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xuICBjb25zdCB1dWlkID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG4gIGNvbnN0IHV1aWRWNCA9IC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG4gIGlmICghdXVpZFY0LnRlc3Qoc3RyKSAmJiAhdXVpZC50ZXN0KHN0cikpIHtcbiAgICB0aHJvdyBuZXcgUmVxdWVzdFF1ZXJ5RXhjZXB0aW9uKFxuICAgICAgYEludmFsaWQgcGFyYW0gJHtuYW1lfS4gVVVJRCBzdHJpbmcgZXhwZWN0ZWRgXG4gICAgKTtcbiAgfVxufVxuIl19